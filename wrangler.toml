# wrangler.toml
name = "kava-pwa"
main = "dist/worker/index.js" # ignored by Pages (fine)

# --- Durable Objects ---
[[durable_objects.bindings]]
name = "LIST_ROOM"
class_name = "ListRoom"

[[durable_objects.bindings]]
name = "TOURNAMENT_ROOM"
class_name = "TournamentRoom"

[[migrations]]
tag = "v1"
new_classes = ["ListRoom", "TournamentRoom"]

# --- KV Namespace ---
[[kv_namespaces]]
binding = "KAVA_TOURNAMENTS"
id = "KAVA_TOURNAMENTS" # your KV id here

# --- Cloudflare Pages Configuration ---
pages_build_output_dir = ".vercel/output"

# Enables built-in Node packages (fixes node:buffer / async_hooks error)
compatibility_flags = ["nodejs_compat"]

# Compatibility date for Workers runtime
compatibility_date = "2024-07-25"
