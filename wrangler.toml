# wrangler.toml
name = "kava-pwa"
main = "dist/worker/index.js" # (ignored by Pages, fine to keep)

# --- Durable Objects bindings ---
[[durable_objects.bindings]]
name = "LIST_ROOM"
class_name = "ListRoom"

[[durable_objects.bindings]]
name = "TOURNAMENT_ROOM"
class_name = "TournamentRoom"

# For Pages, these are required so the DOs exist:
[[migrations]]
tag = "v1"
new_classes = ["ListRoom", "TournamentRoom"]

# KV (for indices + code lookup)
[[kv_namespaces]]
binding = "KAVA_TOURNAMENTS"
id = "KAVA_TOURNAMENTS" # set to your KV id on production env

# --- Cloudflare Pages & compatibility ---
# Required for Pages to recognize this file
pages_build_output_dir = ".vercel/output"

# Enables Node.js built-ins (fixes buffer/async_hooks warning)
compatibility_flags = ["nodejs_compat"]

# Optional but recommended: modern Workers runtime date
compatibility_date = "2024-07-25"
